<div class="c-collectionCarousel c-carousel is-loading">
  {% include 'part-loading' with count: 4 %}
  <div class="c-collectionCarousel__buttons c-carousel__buttons">
    <span class="c-collectionCarousel__button c-carousel__button"></span>
    <span class="c-collectionCarousel__button c-carousel__button"></span>
  </div>
  <div class="c-collectionCarousel__track c-carousel__track">
    {% assign count = 0 %}
    {% for item in collection.products %}
      {% if count >= limit %}
        {% break %}
      {% endif %}
      {% unless item.handle == product.handle %}
        {% assign count = count | plus: 1 %}
        <div class="c-collectionCarousel__slide c-carousel__slide o-flexColumn">
          {% include 'collection-item' with product: item %}  
        </div>
      {% endunless %}
    {% endfor %}
  </div>
</div>

<script src="{{ 'collection-carousel.js' | asset_url }}" defer="defer"></script>