<section id="addresses" class="c-addresses">
  <div class="c-addresses__top o-strip u-bgGray">
    <div class="c-addresses__container o-container o-flexFlip">
      <div class="c-addresses__addresses o-flexItem-40">
        <div class="c-addresses__block c-addresses__primary o-flexColumn">
          <h2 class="c-addresses__heading">
            {{ section.settings.main_primary_heading }}
          </h2>
          {% if customer.addresses.size == 0 %}
            <div class="c-addresses__text">
              {{ section.settings.main_no_address }}
            </div>
            <button class="c-addresses__button c-button-small c-button--secondary trigger-modal" data-modal-content-id="addAddress">
              {{ section.settings.main_add_button }}
            </button>
          {% else %}
            <div class="c-addresses__group">
              {% assign address = customer.default_address %}
              {% if address %}
                <h4 class="c-addresses__subheading">
                  {{ address.first_name | capitalize }} {{ address.last_name | capitalize }}
                  <button class="c-button-icon c-button-icon--edit trigger-modal" data-modal-content-id="editAddress_{{ address.id }}">
                    <i class="fas fa-pencil-alt"></i>
                  </button>
                </h4>
                <div class="c-addresses__text">
                  {% if address.company != '' and address.company != nil %}
                    {{ address.company }}<br />
                  {% endif %}
                  {{ address.address1 }}<br />
                  {% if address.address2 != '' and address.address2 != nil %}
                    {{ address.address2 }}<br />
                  {% endif %}
                  {{ address.city}}, {% if address.province_code %}{{ address.province_code }}, {% endif %} {{ address.zip }}<br />
                  {% if address.phone != '' and address.phone != nil %}
                    {{ address.phone }}
                  {% endif %}
                </div>
              {% endif %}
            </div>
          {% endif %}
        </div>
        <div class="c-addresses__block c-addresses__other o-flexColumn">
          {% if customer.addresses.size > 1 %}
            <h2 class="c-addresses__heading">
              {{ section.settings.main_other_heading }}
            </h2>
            {% if customer.addresses.size == 1 %}
              <div class="c-addresses__text">
                {{ section.settings.main_no_other }}
              </div>
            {% else %}
              {% for address in customer.addresses %}
                {% if address != customer.default_address %}
                  <div class="c-addresses__group">
                    <h4 class="c-addresses__subheading">
                      {{ address.first_name | capitalize }} {{ address.last_name | capitalize }}
                      <button class="c-button-icon c-button-icon--edit trigger-modal" data-modal-content-id="editAddress_{{ address.id }}">
                        <i class="fas fa-pencil-alt"></i>
                      </button>
                    </h4>
                    <div class="c-addresses__text">
                      {% if address.company != '' and address.company != nil %}
                        {{ address.company }}<br />
                      {% endif %}
                      {{ address.address1 }}<br />
                      {% if address.address2 != '' and address.address2 != nil %}
                        {{ address.address2 }}<br />
                      {% endif %}
                      {{ address.city}}, {% if address.province_code %}{{ address.province_code }}, {% endif %} {{ address.zip }}<br />
                      {% if address.phone != '' and address.phone != nil %}
                        {{ address.phone }}
                      {% endif %}
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endif %}
          <button class="c-addresses__button c-address__button--other c-button-small c-button--secondary trigger-modal" data-modal-content-id="addAddress">
            {{ section.settings.main_add_button }}
          </button>
        </div>
      </div>
      <div class="c-addresses__cart o-flexItem-60">
        <vue-cart-account></vue-cart-account>
      </div>
    </div>
  </div>
  <vue-modal prerender="{{ true }}">
    {% include 'form-address-add' %}
    {% include 'form-address-edit' %}
    {% include 'form-address-delete' %}
  </vue-modal>
</section>

{% schema %}
{
	"name": "Page",
	"settings": [
    {
      "type": "header",
      "content": "Addresses Main"
    },
    {
      "type": "text",
			"id": "main_primary_heading",
			"label": "Primary Address Heading",
      "default": "Primary Address"
		},
    {
      "type": "text",
			"id": "main_no_primary",
			"label": "No Primary Address Text",
      "default": "You don't have a primary address."
		},
    {
      "type": "text",
			"id": "main_other_heading",
			"label": "Other Addresses Heading",
      "default": "Other Addresses"
		},
    {
      "type": "text",
			"id": "main_no_other",
			"label": "No Other Addresses Text",
      "default": "You don't have any other addresses."
		},
    {
      "type": "text",
			"id": "main_add_button",
			"label": "Other Addresses Heading",
      "default": "Add Address"
		},
    {
      "type": "header",
      "content": "Add Address Form"
    }
  ]
}

{% endschema %}